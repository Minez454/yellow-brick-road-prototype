<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Icons / Map -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root {
      --gold-shine: linear-gradient(135deg, #ffd700 0%, #ffecb3 25%, #ffc107 50%, #ffb300 75%, #ffd700 100%);
      --cream-flat: #fbfbf8;
      --text-dark: #3e2723;
      --emerald: #00c853;
      --ruby: #d50000;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--cream-flat);
      color: var(--text-dark);
      margin: 0; padding: 0;
      display: flex; flex-direction: column;
      height: 100vh; overflow: hidden;
    }
    button { cursor: pointer; }

    /* Chat */
    #chat-container {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 120px; /* space for input + nav */
    }
    .message {
      padding: 12px 18px;
      border-radius: 18px;
      max-width: 85%;
      word-wrap: break-word;
    }
    .bot-message {
      background-color: white;
      align-self: flex-start;
      border: 1px solid #eee;
    }
    .user-message {
      background: var(--gold-shine);
      color: var(--text-dark);
      align-self: flex-end;
      font-weight: 600;
    }
    .input-area {
      position: fixed;
      bottom: 55px; /* sits above nav-bar */
      left: 0;
      width: 100%;
      padding: 10px;
      background: white;
      display: flex;
      gap: 10px;
      border-top: 1px solid #eee;
      z-index: 300;
    }
    .input-area input {
      flex-grow: 1;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 25px;
      outline: none;
      background: #f9f9f9;
    }
    .send-btn {
      background: var(--gold-shine);
      color: var(--text-dark);
      border: none;
      padding: 0 24px;
      border-radius: 25px;
      font-weight: bold;
    }

    /* Nav bar */
    .nav-bar {
      background: linear-gradient(180deg, #ffc107 0%, #ffca28 100%);
      border-top: 3px solid #b78900;
      display: flex;
      justify-content: space-evenly;
      padding: 8px 5px;
      position: fixed;
      bottom: 0;
      width: 100%;
      z-index: 200;
    }
    .nav-item {
      text-align: center;
      color: var(--text-dark);
      opacity: 0.6;
      background: none;
      border: none;
      font-size: 0.65rem;
      font-weight: 700;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 1px;
      min-width: 16%;
    }
    .nav-item.active {
      opacity: 1;
      transform: translateY(-2px);
      text-shadow: 0 1px 0 rgba(255,255,255,0.5);
    }
    .nav-item i {
      display: block;
      font-size: 1.2rem;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>

  <!-- Landing -->
  <div id="landing-screen">…full landing screen code…</div>

  <!-- Login -->
  <div id="login-screen">…full login screen code…</div>

  <!-- Main App -->
  <div id="main-app" style="display:none; height:100%; flex-direction:column;">
    <div class="header">…header code…</div>

    <!-- Chat -->
    <div id="chat-screen" class="screen active">
      <div id="chat-container">
        <div class="message bot-message">Hello. I am Brick. Think of me as a partner on your journey home. Tell me what's going on, and we will handle it together.</div>
      </div>
      <div class="input-area">
        <input type="text" id="user-input" placeholder="Type here..." onkeydown="handleEnterChat(event)">
        <button class="send-btn" onclick="sendChatMessage()">Send</button>
      </div>
    </div>

    <!-- Map -->
    <div id="map-screen" class="screen">…map code…</div>

    <!-- Portal -->
    <div id="portal-screen" class="screen">…portal code…</div>

    <!-- Agencies -->
    <div id="agencies-screen" class="screen">…agencies code…</div>

    <!-- Workbooks -->
    <div id="workbooks-screen" class="screen">…workbooks code…</div>

    <!-- Vault -->
    <div id="wallet-screen" class="screen">…vault code…</div>

    <!-- Agent -->
    <div id="agent-screen" class="screen">…agent dashboard code…</div>

    <!-- Nav -->
    <div class="nav-bar" id="nav-bar">…nav items…</div>
  </div>

  <!-- Overlays -->
  <div id="agency-viewer">…agency viewer code…</div>
  <div id="lesson-viewer">…lesson viewer code…</div>
  <div id="art-studio">…art studio code…</div>

  <script>
    // All your original JS logic preserved
    function handleEnterChat(e) { if (e.key === "Enter") sendChatMessage(); }
    function sendChatMessage() {
      var input = document.getElementById("user-input");
      var text = input.value.trim();
      if (!text) return;
      document.getElementById('chat-container').innerHTML += `
        <div class="message user-message">${text}</div>
      `;
      input.value = "";
      setTimeout(() => {
        document.getElementById('chat-container').innerHTML += `
          <div class="message bot-message">I hear you. Let's work on this together.</div>
        `;
      }, 600);
    }
    // …rest of your original functions (login, nav switching, renderAgencies, renderWorkbooks, etc.)
  </script>
</body>
</html>
